#!/bin/sh
#set -x
echo "Surface-wave Dispersion Semi-Analitical Modelling"
echo "using CPS; Herrmann, 2002" 
echo "L. Bodet 2005/2006 -- LCPC/BRGM "
echo "deplacements"
#please cf. CPS documentation for details

#Model Name
name=2layers_orig_new



cat > dfile << EOF
0.001 1.25e-3 10000 0.0 0.0


EOF

cat > $name.model.d << EOF
MODEL
TEST MODEL
ISOTROPIC
KGS
FLAT EARTH
2-D
CONSTANT VELOCITY
LINE08
LINE09
LINE10
LINE11
HR      VP      VS     RHO QP  QS  ETAP ETAS FREFP FREFS
0.003 0.6 0.4 0.002  0 0 0 0 1 1
0.005 1.0 0.85 0.0022  0 0 0 0 1 1
0.006 1.5 1.25 0.00225  0 0 0 0 1 1
0.004 1.7 1.4 0.0023  0 0 0 0 1 1
0.005 1.9 1.6 0.0024  0 0 0 0 1 1
0.004 2.2 1.9 0.00245  0 0 0 0 1 1
0.0055 2.3 1.95 0.0025  0 0 0 0 1 1
0.005 2.7 2.2 0.00255  0 0 0 0 1 1
0.005 3.0 2.4 0.00265  0 0 0 0 1 1
0.00000000      1.20000      0.690000      2.00000   0.000000    0.000000       0.0000000       0.00000000       1.00000000       1.00000000###########
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ########################################################################### 
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ########################################################################### 
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ########################################################################### 
   ###########################################################################
   ###########################################################################
   ########################################################################### 
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################
   ###########################################################################      
EOF



 ################
#sprep96 -M $name.model.d -NMOD ${NMODE} -R  -d dfile 
sprep96 -M $name.model.d -NMOD 6 -R  -d dfile 
sdisp96
#sdisp96 -M $name.model.d -NMOD 3 -R  -d dfile 

sdpsrf96 -R -FREQ -TXT
cp SDISPR.TXT $name.txt
cp SDISPR.TXT $name.rc.dat

# cat > $name.roland.plot << EOF
# set term X11
# #set term postscript 
# #set output "$name.tdspdep.ps"
# set xlabel "frequency (Hz)"
# set ylabel "velocity (m/s)"
# set yrange [0. : 750.]
# set xrange [0. : 250.]
# plot '$name.rc.dat' us (\$2):(1000*\$3) w l #with lines
# EOF
# gnuplot< $name.roland.plot



#rm -rf sdisp96.dat sdisp96.lov sdisp96.ray slegn96.egn sregn96.egn \
#       SLEGNC.PLT SREGNC.PLT dfile slegn96.der sregn96.der \
#       SDISPR.PLT \
#       SRDER.PLT \
#       *.TXT
##       SRDER.TXT
